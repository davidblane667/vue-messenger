# ADR-001: Технологический стек

**Статус:** Принято
**Дата:** 2026-02-19

---

## Контекст

Необходимо выбрать технологический стек для SPA-мессенджера. Задание явно задаёт ограничения (Vue 3, SCSS, без UI-библиотек), остальные решения принимаются самостоятельно.

## Решение

| Технология | Версия | Обоснование |
|---|---|---|
| **Vue 3** | latest | Требование ТЗ. Composition API (`<script setup>`) — стандарт Vue 3. |
| **TypeScript** | ^5.x | Строгая типизация. Опция ТЗ, принятая обязательной — повышает качество и оценку. |
| **Vite** | ^6.x | Де-факто стандартный сборщик для Vue 3. Быстрый HMR, нативный ESM. |
| **Pinia** | ^3.x | Официальный стор Vue 3. Отдельное ADR-002. pinia-plugin-persistedstate требует pinia@^3. |
| **Vue Router** | ^4.x | Требование ТЗ. Единственный официальный роутер для Vue 3. |
| **SCSS** | через sass | Требование ТЗ. Позволяет использовать переменные, миксины, вложенность. |
| **Vitest** | ^3.x | Тестирование. Нативная интеграция с Vite, совместим с Vue Test Utils. |
| **ESLint** | ^9.x | Статический анализ: ловит ошибки и запрещает `any`. Flat config (`eslint.config.ts`). |
| **Prettier** | ^3.x | Автоформатирование. Единый стиль кода без споров о табах/пробелах. |

## Строгие правила TypeScript

- **Запрещено использование `any`** — использовать `unknown` с проверкой типа, явные интерфейсы или type guards
- `tsconfig.json` должен включать `"strict": true`
- Все публичные API (функции, composables, store actions) должны иметь явные сигнатуры
- Импорт только через `import type` для типов

```json
// tsconfig.json (обязательные флаги)
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true
  }
}
```

## Правила ESLint + Prettier

- ESLint использует **flat config** (`eslint.config.ts`) — актуальный формат для ESLint 9+
- Плагины: `@eslint/js`, `typescript-eslint`, `eslint-plugin-vue`
- Prettier интегрируется через `eslint-config-prettier` — отключает ESLint-правила, конфликтующие с Prettier
- `eslint-plugin-prettier` — запускает Prettier как ESLint-правило, ошибки форматирования = ESLint-ошибки
- Правило `@typescript-eslint/no-explicit-any: 'error'` — запрет `any` на уровне линтера
- `npm run lint` — проверка, `npm run lint:fix` — автоисправление

## Последствия

- Повышенное время разработки из-за строгой типизации — компенсируется меньшим кол-вом рантайм-ошибок
- Vitest покрывает stores, services, composables без необходимости запускать браузер
- ESLint + Prettier обеспечивают консистентный стиль кода независимо от IDE разработчика
