# Глоссарий предметной области

## Основные понятия

### Участники

| Термин | Определение |
|---|---|
| **Текущий пользователь** | Авторизованный пользователь приложения — «я». Его сообщения — исходящие. ID фиксирован (константа `CURRENT_USER_ID`). |
| **Собеседник** (Contact) | Пользователь из списка контактов, с которым ведётся переписка. Данные загружаются из внешнего API. |

### Чат и сообщения

| Термин | Определение |
|---|---|
| **Чат** (Chat) | Диалог между текущим пользователем и одним собеседником. Идентифицируется по `userId` собеседника. |
| **История сообщений** | Упорядоченный по времени список сообщений в конкретном чате. |
| **Сообщение** (Message) | Единица переписки. Содержит текст, тип, временну́ю метку и статус прочтения. |
| **Входящее сообщение** (incoming) | Сообщение, отправленное собеседником. Отображается слева. |
| **Исходящее сообщение** (outgoing) | Сообщение, отправленное текущим пользователем. Отображается справа. |
| **Автоответ** | Эмулированный ответ собеседника, генерируемый через 1–2 секунды после исходящего сообщения. Текст фиксирован: `«Спасибо за сообщение!)»` |
| **Непрочитанное сообщение** | Входящее сообщение, поступившее пока чат не был активен. |

### Статусы

| Термин | Определение |
|---|---|
| **Статус пользователя** | Состояние присутствия собеседника в приложении: `online` или `offline`. |
| **Индикатор статуса** | Цветной кружок рядом с аватаром: зелёный — `online`, серый — `offline`. |
| **Бейдж непрочитанных** | Числовой счётчик входящих сообщений, поступивших в неактивный чат. |

### Технические термины

| Термин | Определение |
|---|---|
| **SPA** | Single Page Application — одностраничное приложение без перезагрузки при навигации. |
| **Эмуляция WebSocket** | Имитация асинхронного получения сообщений через `setTimeout` без реального сетевого соединения. |
| **Персистентность** | Сохранение данных (история, статусы) в `localStorage` между перезагрузками страницы. |
| **Адаптивный дизайн** | Изменение layout на основе ширины экрана. Breakpoint: `768px`. |
| **Форматирование** | Разметка текста сообщения: **жирный** и *курсив* через синтаксис Markdown (`**bold**`, `*italic*`). |
| **UI-кит** | Набор базовых переиспользуемых компонентов (BaseButton, BaseAvatar и др.), реализованных без сторонних библиотек. |

---

## Жизненный цикл чата

```
Приложение запущено
  → Загрузка контактов из API (jsonplaceholder)
  → Каждому контакту присваивается случайный статус online/offline
  → Отображается список чатов

Пользователь открывает чат
  → Если история отсутствует → генерация 20–30 случайных сообщений
  → Если история есть (localStorage) → восстановление из хранилища
  → Счётчик непрочитанных сбрасывается
  → Статус собеседника может случайно измениться (30% шанс)
  → Автоскролл к последнему сообщению

Пользователь отправляет сообщение
  → Валидация: текст не пустой
  → Исходящее сообщение добавляется в историю немедленно
  → Поле ввода очищается
  → Через 1–2с поступает автоответ (incoming)
  → Автоскролл к новому сообщению

Сообщение поступает в неактивный чат
  → unreadCount увеличивается на 1
  → В списке чатов отображается бейдж
```
